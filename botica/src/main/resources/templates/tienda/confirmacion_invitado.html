<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <title>Confirmación de Pedido</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <script>
    function imprimirPagina() {
      window.print();
    }
  </script>
</head>

<body>
  <div class="container mt-5">
    <h2>¡Gracias por tu pedido!</h2>
    <p>Tu pedido ha sido registrado exitosamente.</p>

    <!-- Información del pedido -->
    <div class="card mb-4 shadow-sm p-3">
      <p><strong>Pedido ID:</strong> <span th:text="${#numbers.formatInteger(pedido.id, 6)}"></span></p>
      <p><strong>Fecha:</strong> <span th:text="${pedido.fecha}"></span></p>
      <p><strong>Total:</strong> S/ <span th:text="${pedido.total}"></span></p>
      <p><strong>Entrega:</strong>
        <span th:if="${pedido.delivery}">
          Delivery<br>
          Dirección: <span th:text="${pedido.usuario != null ? pedido.usuario.direccion : 'No registrado'}"></span><br>
          Recibe: <span th:text="${pedido.nombreRecojo}"></span>
        </span>
        <span th:if="${!pedido.delivery}">
          Recojo en tienda<br>
          Dirección: <span th:text="${pedido.recojo}"></span><br>
          Horario: <span th:text="${pedido.horarioRecojo}"></span><br>
          A nombre de: <span th:text="${pedido.nombreRecojo}"></span>
        </span>
      </p>
    </div>

    <!-- Detalles de productos -->
    <table class="table table-striped mb-4">
      <thead class="table-dark">
        <tr>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="d : ${detalles}">
          <td th:text="${d.producto.nombre}"></td>
          <td th:text="${d.cantidad}"></td>
          <td>S/ <span th:text="${d.subtotal}"></span></td>
        </tr>
      </tbody>
    </table>

    <!-- Botones -->
    <button class="btn btn-success me-2" onclick="imprimirPagina()">
      <i class="bi bi-printer"></i> Imprimir
    </button>
    <a href="/" class="btn btn-primary">Volver al inicio</a>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</body>

</html>